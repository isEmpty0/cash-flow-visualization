{"version":3,"sources":["../src/financial.ts","cfviz.js"],"names":["PaymentDueTime","fv","rate","nper","pmt","pv","when","End","isRateZero","temp","whenMult","Begin","maskedRate","fact","z","Math","log","ipmt","per","Number","NaN","totalPmt","ipmtVal","_rbl","ppmt","total","guess","tol","maxIter","rn","iterator","close","rnp1","_gDivGp","diff","abs","irr","values","dates","positive","negative","i","length","resultRate","newRate","epsRate","resultValue","iteration","contLoop","_irrResult","_irrResultDeriv","npv","reduce","acc","curr","mirr","financeRate","reinvestRate","numer","map","x","denom","r","n","p","y","w","t1","t2","g","gp","result","pow","frac","coinHtml","inflow","document","querySelector","outflow","paidToDate","submit","chevron","loanAmount","origDate","interestRate","lengthMonths","incomeYears","form","timePayments","timeIncome","currentTime","Date","now","console","value","getTime","handleInput","e","preventDefault","payment","parseFloat","replace","second","minute","hour","day","week","month","year","income","timePassed","toDate","setInterval","updateAmount","delay","animateFlow","html","toFixed","innerHTML","setTimeout","inflowDuration","outflowDuration","animate","transform","duration","iterations","Infinity","toggleView","classList","contains","window","scrollTo","left","top","body","scrollHeight","behavior","remove","add","addEventListener"],"mappings":"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","file":"cfviz.df5e08f6.js","sourceRoot":"..","sourcesContent":["/**\n * When payments are due\n *\n * @since v0.0.12\n */\nexport enum PaymentDueTime {\n  /** Payments due at the beginning of a period (1) */\n  Begin = 'begin', // 1\n  /** Payments are due at the end of a period (0) */\n  End = 'end' // 0\n}\n\n/**\n * Compute the future value.\n *\n * @param rate - Rate of interest as decimal (not per cent) per period\n * @param nper - Number of compounding periods\n * @param pmt - A fixed payment, paid either at the beginning or ar the end (specified by `when`)\n * @param pv - Present value\n * @param when - When payment was made\n *\n * @returns The value at the end of the `nper` periods\n *\n * @since v0.0.12\n *\n * ## Examples\n *\n * What is the future value after 10 years of saving $100 now, with\n * an additional monthly savings of $100. Assume the interest rate is\n * 5% (annually) compounded monthly?\n *\n * ```javascript\n * import { fv } from 'financial'\n *\n * fv(0.05 / 12, 10 * 12, -100, -100) // 15692.928894335748\n * ```\n *\n * By convention, the negative sign represents cash flow out (i.e. money not\n * available today).  Thus, saving $100 a month at 5% annual interest leads\n * to $15,692.93 available to spend in 10 years.\n *\n * ## Notes\n *\n * The future value is computed by solving the equation:\n *\n * ```\n * fv + pv * (1+rate) ** nper + pmt * (1 + rate * when) / rate * ((1 + rate) ** nper - 1) == 0\n * ```\n *\n * or, when `rate == 0`:\n *\n * ```\n * fv + pv + pmt * nper == 0\n * ```\n *\n * ## References\n *\n * [Wheeler, D. A., E. Rathke, and R. Weir (Eds.) (2009, May)](http://www.oasis-open.org/committees/documents.php?wg_abbrev=office-formulaOpenDocument-formula-20090508.odt).\n */\nexport function fv (rate: number, nper: number, pmt: number, pv: number, when : PaymentDueTime = PaymentDueTime.End) : number {\n  const isRateZero = rate === 0\n\n  if (isRateZero) {\n    return -(pv + pmt * nper)\n  }\n\n  const temp = (1 + rate) ** nper\n  const whenMult = when === PaymentDueTime.Begin ? 1 : 0\n  return (-pv * temp - pmt * (1 + rate * whenMult) / rate * (temp - 1))\n}\n\n/**\n * Compute the payment against loan principal plus interest.\n *\n * @param rate - Rate of interest (per period)\n * @param nper - Number of compounding periods (e.g., number of payments)\n * @param pv - Present value (e.g., an amount borrowed)\n * @param fv - Future value (e.g., 0)\n * @param when - When payments are due\n *\n * @returns the (fixed) periodic payment\n *\n * @since v0.0.12\n *\n * ## Examples\n *\n * What is the monthly payment needed to pay off a $200,000 loan in 15\n * years at an annual interest rate of 7.5%?\n *\n * ```javascript\n * import { pmt } from 'financial'\n *\n * pmt(0.075/12, 12*15, 200000) // -1854.0247200054619\n * ```\n *\n * In order to pay-off (i.e., have a future-value of 0) the $200,000 obtained\n * today, a monthly payment of $1,854.02 would be required.  Note that this\n * example illustrates usage of `fv` having a default value of 0.\n *\n * ## Notes\n *\n * The payment is computed by solving the equation:\n *\n * ```\n * fv + pv * (1 + rate) ** nper + pmt * (1 + rate*when) / rate * ((1 + rate) ** nper - 1) == 0\n * ```\n *\n * or, when `rate == 0`:\n *\n * ```\n * fv + pv + pmt * nper == 0\n * ```\n *\n * for `pmt`.\n *\n * Note that computing a monthly mortgage payment is only\n * one use for this function.  For example, `pmt` returns the\n * periodic deposit one must make to achieve a specified\n * future balance given an initial deposit, a fixed,\n * periodically compounded interest rate, and the total\n * number of periods.\n *\n * ## References\n *\n * [Wheeler, D. A., E. Rathke, and R. Weir (Eds.) (2009, May)](http://www.oasis-open.org/committees/documents.php?wg_abbrev=office-formulaOpenDocument-formula-20090508.odt).\n */\nexport function pmt (rate: number, nper: number, pv: number, fv = 0, when = PaymentDueTime.End): number {\n  const isRateZero = rate === 0\n  const temp = (1 + rate) ** nper\n  const whenMult = when === PaymentDueTime.Begin ? 1 : 0\n  const maskedRate = isRateZero ? 1 : rate\n  const fact = isRateZero\n    ? nper\n    : (1 + maskedRate * whenMult) * (temp - 1) / maskedRate\n\n  return -(fv + pv * temp) / fact\n}\n\n/**\n * Compute the number of periodic payments.\n *\n * @param rate - Rate of interest (per period)\n * @param pmt - Payment\n * @param pv - Present value\n * @param fv - Future value\n * @param when - When payments are due\n *\n * @returns The number of periodic payments\n *\n * @since v0.0.12\n *\n * ## Examples\n *\n * If you only had $150/month to pay towards the loan, how long would it take\n * to pay-off a loan of $8,000 at 7% annual interest?\n *\n * ```javascript\n * import { nper } from 'financial'\n *\n * Math.round(nper(0.07/12, -150, 8000), 5) // 64.07335\n * ```\n *\n * So, over 64 months would be required to pay off the loan.\n *\n * ## Notes\n *\n * The number of periods `nper` is computed by solving the equation:\n *\n * ```\n * fv + pv * (1+rate) ** nper + pmt * (1+rate * when) / rate * ((1+rate) ** nper-1) = 0\n * ```\n *\n * but if `rate = 0` then:\n *\n * ```\n * fv + pv + pmt * nper = 0\n * ```\n */\nexport function nper (rate: number, pmt: number, pv: number, fv = 0, when = PaymentDueTime.End) : number {\n  const isRateZero = rate === 0\n  if (isRateZero) {\n    return -(fv + pv) / pmt\n  }\n\n  const whenMult = when === PaymentDueTime.Begin ? 1 : 0\n  const z = pmt * (1 + rate * whenMult) / rate\n  return Math.log((-fv + z) / (pv + z)) / Math.log(1 + rate)\n}\n\n/**\n * Compute the interest portion of a payment.\n *\n * @param rate - Rate of interest as decimal (not per cent) per period\n * @param per - Interest paid against the loan changes during the life or the loan. The `per` is the payment period to calculate the interest amount\n * @param nper - Number of compounding periods\n * @param pv - Present value\n * @param fv - Future value\n * @param when - When payments are due\n *\n * @returns Interest portion of payment\n *\n * @since v0.0.12\n *\n * ## Examples\n *\n * What is the amortization schedule for a 1 year loan of $2500 at\n * 8.24% interest per year compounded monthly?\n *\n * ```javascript\n * const principal = 2500\n * const periods = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\n * const ipmts = periods.map((per) => f.ipmt(0.0824 / 12, per, 1 * 12, principal))\n * expect(ipmts).toEqual([\n *   -17.166666666666668,\n *   -15.789337457350777,\n *   -14.402550587464257,\n *   -13.006241114404524,\n *   -11.600343649629737,\n *   -10.18479235559687,\n *   -8.759520942678298,\n *   -7.324462666057678,\n *   -5.879550322604295,\n *   -4.424716247725826,\n *   -2.9598923121998877,\n *   -1.4850099189833388\n * ])\n * const interestpd = ipmts.reduce((a, b) => a + b, 0)\n * expect(interestpd).toBeCloseTo(-112.98308424136215, 6)\n * ```\n *\n * The `periods` variable represents the periods of the loan.  Remember that financial equations start the period count at 1!\n *\n * ## Notes\n *\n * The total payment is made up of payment against principal plus interest.\n *\n * ```\n * pmt = ppmt + ipmt\n * ```\n */\nexport function ipmt (rate: number, per: number, nper: number, pv: number, fv = 0, when = PaymentDueTime.End) : number {\n  // Payments start at the first period, so payments before that\n  // don't make any sense.\n  if (per < 1) {\n    return Number.NaN\n  }\n\n  // If payments occur at the beginning of a period and this is the\n  // first period, then no interest has accrued.\n  if (when === PaymentDueTime.Begin && per === 1) {\n    return 0\n  }\n\n  const totalPmt = pmt(rate, nper, pv, fv, when)\n  let ipmtVal = _rbl(rate, per, totalPmt, pv, when) * rate\n\n  // If paying at the beginning we need to discount by one period\n  if (when === PaymentDueTime.Begin && per > 1) {\n    ipmtVal = ipmtVal / (1 + rate)\n  }\n\n  return ipmtVal\n}\n\n/**\n * Compute the payment against loan principal.\n *\n * @param rate - Rate of interest (per period)\n * @param per - Amount paid against the loan changes.  The `per` is the period of interest.\n * @param nper - Number of compounding periods\n * @param pv - Present value\n * @param fv - Future value\n * @param when - When payments are due\n *\n * @returns the payment against loan principal\n *\n * @since v0.0.14\n */\nexport function ppmt (rate: number, per: number, nper: number, pv: number, fv = 0, when = PaymentDueTime.End) : number {\n  const total = pmt(rate, nper, pv, fv, when)\n  return total - ipmt(rate, per, nper, pv, fv, when)\n}\n\n/**\n * Calculates the present value of an annuity investment based on constant-amount\n * periodic payments and a constant interest rate.\n *\n * @param rate - Rate of interest (per period)\n * @param nper - Number of compounding periods\n * @param pmt - Payment\n * @param fv - Future value\n * @param when - When payments are due\n *\n * @returns the present value of a payment or investment\n *\n * @since v0.0.15\n *\n * ## Examples\n *\n * What is the present value (e.g., the initial investment)\n * of an investment that needs to total $15692.93\n * after 10 years of saving $100 every month?  Assume the\n * interest rate is 5% (annually) compounded monthly.\n *\n * ```javascript\n * import { pv } from 'financial'\n *\n * pv(0.05/12, 10*12, -100, 15692.93) // -100.00067131625819\n * ```\n *\n * By convention, the negative sign represents cash flow out\n * (i.e., money not available today).  Thus, to end up with\n * $15,692.93 in 10 years saving $100 a month at 5% annual\n * interest, one's initial deposit should also be $100.\n *\n * ## Notes\n *\n * The present value is computed by solving the equation:\n *\n * ```\n * fv + pv * (1 + rate) ** nper + pmt * (1 + rate * when) / rate * ((1 + rate) ** nper - 1) = 0\n * ```\n *\n * or, when `rate = 0`:\n *\n * ```\n * fv + pv + pmt * nper = 0\n * ```\n *\n * for `pv`, which is then returned.\n *\n * ## References\n *\n * [Wheeler, D. A., E. Rathke, and R. Weir (Eds.) (2009, May)](http://www.oasis-open.org/committees/documents.php?wg_abbrev=office-formulaOpenDocument-formula-20090508.odt).\n */\nexport function pv (rate: number, nper: number, pmt: number, fv = 0, when = PaymentDueTime.End): number {\n  const whenMult = when === PaymentDueTime.Begin ? 1 : 0\n  const isRateZero = rate === 0\n  const temp = (1 + rate) ** nper\n  const fact = isRateZero\n    ? nper\n    : (1 + rate * whenMult) * (temp - 1) / rate\n  return -(fv + pmt * fact) / temp\n}\n\n/**\n * Compute the rate of interest per period\n *\n * @param nper - Number of compounding periods\n * @param pmt - Payment\n * @param pv - Present value\n * @param fv - Future value\n * @param when - When payments are due ('begin' or 'end')\n * @param guess - Starting guess for solving the rate of interest\n * @param tol - Required tolerance for the solution\n * @param maxIter - Maximum iterations in finding the solution\n *\n * @returns the rate of interest per period (or `NaN` if it could\n *  not be computed within the number of iterations provided)\n *\n * @since v0.0.16\n *\n * ## Notes\n *\n * Use Newton's iteration until the change is less than 1e-6\n * for all values or a maximum of 100 iterations is reached.\n * Newton's rule is:\n *\n * ```\n * r_{n+1} = r_{n} - g(r_n)/g'(r_n)\n * ```\n *\n * where:\n *\n * - `g(r)` is the formula\n * - `g'(r)` is the derivative with respect to r.\n *\n *\n * The rate of interest is computed by iteratively solving the\n * (non-linear) equation:\n *\n * ```\n * fv + pv * (1+rate) ** nper + pmt * (1+rate * when) / rate * ((1+rate) ** nper - 1) = 0\n * ```\n *\n * for `rate.\n *\n * ## References\n *\n * [Wheeler, D. A., E. Rathke, and R. Weir (Eds.) (2009, May)](http://www.oasis-open.org/committees/documents.php?wg_abbrev=office-formulaOpenDocument-formula-20090508.odt).\n */\nexport function rate (nper: number, pmt: number, pv: number, fv: number, when = PaymentDueTime.End, guess = 0.1, tol = 1e-6, maxIter = 100) : number {\n  let rn = guess\n  let iterator = 0\n  let close = false\n\n  while (iterator < maxIter && !close) {\n    const rnp1 = rn - _gDivGp(rn, nper, pmt, pv, fv, when)\n    const diff = Math.abs(rnp1 - rn)\n    close = diff < tol\n    iterator++\n    rn = rnp1\n  }\n\n  // if exausted all the iterations and the result is not\n  // close enough, returns `NaN`\n  if (!close) {\n    return Number.NaN\n  }\n\n  return rn\n}\n\n/**\n * Return the Internal Rate of Return (IRR).\n *\n * This is the \"average\" periodically compounded rate of return\n * that gives a net present value of 0.0; for a more complete\n * explanation, see Notes below.\n *\n * @param values - Input cash flows per time period.\n *   By convention, net \"deposits\"\n *   are negative and net \"withdrawals\" are positive.  Thus, for\n *   example, at least the first element of `values`, which represents\n *   the initial investment, will typically be negative.\n * @param guess - Starting guess for solving the Internal Rate of Return\n * @param tol - Required tolerance for the solution\n * @param maxIter - Maximum iterations in finding the solution\n *\n * @returns Internal Rate of Return for periodic input values\n *\n * @since v0.0.17\n *\n * ## Notes\n *\n * The IRR is perhaps best understood through an example (illustrated\n * using `irr` in the Examples section below).\n *\n * Suppose one invests 100\n * units and then makes the following withdrawals at regular (fixed)\n * intervals: 39, 59, 55, 20.  Assuming the ending value is 0, one's 100\n * unit investment yields 173 units; however, due to the combination of\n * compounding and the periodic withdrawals, the \"average\" rate of return\n * is neither simply 0.73/4 nor (1.73)^0.25-1.\n * Rather, it is the solution (for `r`) of the equation:\n *\n * ```\n * -100 + 39/(1+r) + 59/((1+r)^2) + 55/((1+r)^3) + 20/((1+r)^4) = 0\n * ```\n *\n * In general, for `values` = `[0, 1, ... M]`,\n * `irr` is the solution of the equation:\n *\n * ```\n * \\\\sum_{t=0}^M{\\\\frac{v_t}{(1+irr)^{t}}} = 0\n * ```\n *\n * ## Example\n *\n * ```javascript\n * import { irr } from 'financial'\n *\n * irr([-100, 39, 59, 55, 20]) // 0.28095\n * irr([-100, 0, 0, 74]) // -0.0955\n * irr([-100, 100, 0, -7]) // -0.0833\n * irr([-100, 100, 0, 7]) // 0.06206\n * irr([-5, 10.5, 1, -8, 1]) // 0.0886\n * ```\n *\n * ## References\n *\n * - L. J. Gitman, \"Principles of Managerial Finance, Brief,\" 3rd ed.,\n *  Addison-Wesley, 2003, pg. 348.\n */\nexport function irr (values: number[], guess = 0.1, tol = 1e-6, maxIter = 100): number {\n  // Based on https://gist.github.com/ghalimi/4591338 by @ghalimi\n  // ASF licensed (check the link for the full license)\n  // Credits: algorithm inspired by Apache OpenOffice\n\n  // Initialize dates and check that values contains at\n  // least one positive value and one negative value\n  const dates : number[] = []\n  let positive = false\n  let negative = false\n  for (let i = 0; i < values.length; i++) {\n    dates[i] = (i === 0) ? 0 : dates[i - 1] + 365\n    if (values[i] > 0) {\n      positive = true\n    }\n    if (values[i] < 0) {\n      negative = true\n    }\n  }\n\n  // Return error if values does not contain at least one positive\n  // value and one negative value\n  if (!positive || !negative) {\n    return Number.NaN\n  }\n\n  // Initialize guess and resultRate\n  let resultRate = guess\n\n  // Implement Newton's method\n  let newRate, epsRate, resultValue\n  let iteration = 0\n  let contLoop = true\n  do {\n    resultValue = _irrResult(values, dates, resultRate)\n    newRate = resultRate - resultValue / _irrResultDeriv(values, dates, resultRate)\n    epsRate = Math.abs(newRate - resultRate)\n    resultRate = newRate\n    contLoop = (epsRate > tol) && (Math.abs(resultValue) > tol)\n  } while (contLoop && (++iteration < maxIter))\n\n  if (contLoop) {\n    return Number.NaN\n  }\n\n  // Return internal rate of return\n  return resultRate\n}\n\n/**\n * Returns the NPV (Net Present Value) of a cash flow series.\n *\n * @param rate - The discount rate\n * @param values - The values of the time series of cash flows.  The (fixed) time\n * interval between cash flow \"events\" must be the same as that for\n * which `rate` is given (i.e., if `rate` is per year, then precisely\n * a year is understood to elapse between each cash flow event).  By\n * convention, investments or \"deposits\" are negative, income or\n * \"withdrawals\" are positive; `values` must begin with the initial\n * investment, thus `values[0]` will typically be negative.\n * @returns The NPV of the input cash flow series `values` at the discount `rate`.\n *\n * @since v0.0.18\n *\n * ## Warnings\n *\n * `npv considers a series of cashflows starting in the present (t = 0).\n * NPV can also be defined with a series of future cashflows, paid at the\n * end, rather than the start, of each period. If future cashflows are used,\n * the first cashflow `values[0]` must be zeroed and added to the net\n * present value of the future cashflows. This is demonstrated in the\n * examples.\n *\n * ## Notes\n *\n * Returns the result of:\n *\n * ```\n * \\\\sum_{t=0}^{M-1}{\\\\frac{values_t}{(1+rate)^{t}}}\n * ```\n *\n * ## Examples\n *\n * Consider a potential project with an initial investment of $40 000 and\n * projected cashflows of $5 000, $8 000, $12 000 and $30 000 at the end of\n * each period discounted at a rate of 8% per period. To find the project's\n * net present value:\n *\n * ```javascript\n * import {npv} from 'financial'\n *\n * const rate = 0.08\n * const cashflows = [-40_000, 5000, 8000, 12000, 30000]\n * npv(rate, cashflows) // 3065.2226681795255\n * ```\n *\n * It may be preferable to split the projected cashflow into an initial\n * investment and expected future cashflows. In this case, the value of\n * the initial cashflow is zero and the initial investment is later added\n * to the future cashflows net present value:\n *\n * ```javascript\n * const initialCashflow = cashflows[0]\n * cashflows[0] = 0\n *\n * npv(rate, cashflows) + initialCashflow // 3065.2226681795255\n * ```\n *\n * ## References\n *\n * L. J. Gitman, \"Principles of Managerial Finance, Brief,\"\n * 3rd ed., Addison-Wesley, 2003, pg. 346.\n */\nexport function npv (rate: number, values: number[]) : number {\n  return values.reduce(\n    (acc, curr, i) => acc + (curr / (1 + rate) ** i),\n    0\n  )\n}\n\n/**\n * Calculates the Modified Internal Rate of Return.\n *\n * @param values - Cash flows (must contain at least one positive and one negative\n *   value) or nan is returned.  The first value is considered a sunk\n *   cost at time zero.\n * @param financeRate - Interest rate paid on the cash flows\n * @param reinvestRate - Interest rate received on the cash flows upon reinvestment\n *\n * @returns Modified internal rate of return\n *\n * @since v0.1.0\n */\nexport function mirr (values: number[], financeRate: number, reinvestRate: number): number {\n  let positive = false\n  let negative = false\n  for (let i = 0; i < values.length; i++) {\n    if (values[i] > 0) {\n      positive = true\n    }\n    if (values[i] < 0) {\n      negative = true\n    }\n  }\n\n  // Return error if values does not contain at least one\n  // positive value and one negative value\n  if (!positive || !negative) {\n    return Number.NaN\n  }\n\n  const numer = Math.abs(npv(reinvestRate, values.map((x) => x > 0 ? x : 0)))\n  const denom = Math.abs(npv(financeRate, values.map(x => x < 0 ? x : 0)))\n  return (numer / denom) ** (1 / (values.length - 1)) * (1 + reinvestRate) - 1\n}\n\n/**\n * This function is here to simply have a different name for the 'fv'\n * function to not interfere with the 'fv' keyword argument within the 'ipmt'\n * function.  It is the 'remaining balance on loan' which might be useful as\n * it's own function, but is easily calculated with the 'fv' function.\n *\n * @private\n */\nfunction _rbl (rate: number, per: number, pmt: number, pv: number, when: PaymentDueTime) {\n  return fv(rate, (per - 1), pmt, pv, when)\n}\n\n/**\n * Evaluates `g(r_n)/g'(r_n)`, where:\n *\n * ```\n * g = fv + pv * (1+rate) ** nper + pmt * (1+rate * when)/rate * ((1+rate) ** nper - 1)\n * ```\n *\n * @private\n */\nfunction _gDivGp (r: number, n: number, p: number, x: number, y: number, when: PaymentDueTime): number {\n  const w = when === PaymentDueTime.Begin ? 1 : 0\n\n  const t1 = (r + 1) ** n\n  const t2 = (r + 1) ** (n - 1)\n  const g = y + t1 * x + p * (t1 - 1) * (r * w + 1) / r\n  const gp = (n * t2 * x -\n    p * (t1 - 1) * (r * w + 1) / (r ** 2) +\n    n * p * t2 * (r * w + 1) / r +\n    p * (t1 - 1) * w / r)\n  return g / gp\n}\n\n/**\n * Calculates the resulting amount.\n *\n * Based on https://gist.github.com/ghalimi/4591338 by @ghalimi\n * ASF licensed (check the link for the full license)\n *\n * @private\n */\nfunction _irrResult (values: number[], dates: number[], rate: number): number {\n  const r = rate + 1\n  let result = values[0]\n  for (let i = 1; i < values.length; i++) {\n    result += values[i] / Math.pow(r, (dates[i] - dates[0]) / 365)\n  }\n  return result\n}\n\n/**\n * Calculates the first derivation\n *\n * Based on https://gist.github.com/ghalimi/4591338 by @ghalimi\n * ASF licensed (check the link for the full license)\n *\n * @private\n */\nfunction _irrResultDeriv (values: number[], dates: number[], rate: number) : number {\n  const r = rate + 1\n  let result = 0\n  for (let i = 1; i < values.length; i++) {\n    const frac = (dates[i] - dates[0]) / 365\n    result -= frac * values[i] / Math.pow(r, frac + 1)\n  }\n  return result\n}\n","import { pmt } from 'financial';\r\n\r\n//remix icon\r\nconst coinHtml = `\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"18\" height=\"18\"><path fill=\"none\" d=\"M0 0h24v24H0z\"/><path d=\"M12 4c6.075 0 11 2.686 11 6v4c0 3.314-4.925 6-11 6-5.967 0-10.824-2.591-10.995-5.823L1 14v-4c0-3.314 4.925-6 11-6zm0 12c-3.72 0-7.01-1.007-9-2.55V14c0 1.882 3.883 4 9 4 5.01 0 8.838-2.03 8.995-3.882L21 14l.001-.55C19.011 14.992 15.721 16 12 16zm0-10c-5.117 0-9 2.118-9 4 0 1.882 3.883 4 9 4s9-2.118 9-4c0-1.882-3.883-4-9-4z\"/></svg>\r\n`;\r\n//DOM\r\nconst inflow = document.querySelector('.inflow');\r\nconst outflow = document.querySelector('.outflow');\r\nconst paidToDate = document.querySelector('.paid-to-date');\r\n\r\nconst submit = document.querySelector('.submit');\r\nconst chevron = document.querySelector('.chevron');\r\nlet loanAmount = document.querySelector('[name=\"loanAmount\"]');\r\nlet origDate = document.querySelector('[name=\"origDate\"]');\r\nlet interestRate = document.querySelector('[name=\"interestRate\"]');\r\nlet lengthMonths = document.querySelector('[name=\"lengthMonths\"]');\r\nlet incomeYears = document.querySelector('[name=\"income\"]');\r\n\r\nconst form = document.querySelector('.flex-form');\r\n\r\nlet timePayments = {};\r\nlet timeIncome = {};\r\nlet currentTime = Date.now();\r\nconsole.log(currentTime);\r\n\r\nconsole.log(new Date(origDate.value).getTime());\r\n\r\n//Handle Input\r\nfunction handleInput(e){\r\n    e.preventDefault();\r\n    let payment = pmt(interestRate.value/1200, lengthMonths.value, \r\n        parseFloat(loanAmount.value.replace(/\\$|,/g, '')));\r\n        console.log(payment);\r\n    timePayments = {\r\n        second: payment * 12 / 365.25 / 24 / 60 / 60,\r\n        minute: payment * 12 / 365.25 / 24 / 60,\r\n        hour: payment * 12 / 365.25 / 24,\r\n        day: payment * 12 / 365.25,\r\n        week: payment * 12 / 365.25 * 7,\r\n        month: payment,\r\n        year: payment * 12,\r\n        total: payment * lengthMonths.value,\r\n    }\r\n    let income = incomeYears.value;\r\n    timeIncome = {\r\n        second: income / 365.25 / 24 / 60 / 60,\r\n        minute: income / 365.25 / 24 / 60,\r\n        hour: income / 365.25 / 24,\r\n        day: income / 365.25,\r\n        week: income / 365.25 * 7,\r\n        month: income / 12,\r\n        year: income\r\n    }\r\n    console.log(timePayments.second);\r\n\r\n    let timePassed = (Date.now()-new Date(origDate.value).getTime())/1000;\r\n    timePayments.toDate = timePayments.second * timePassed;\r\n    console.log(timePayments.toDate);\r\n    setInterval(function(){\r\n        timePassed = (Date.now()-new Date(origDate.value).getTime())/1000;\r\n        timePayments.toDate = timePayments.second * timePassed;\r\n        updateAmount(timePayments);\r\n    }, 1000);\r\n    timePayments.delay = -1000*(.01 + (timePayments.toDate % .01))/ timePayments.second;\r\n    console.log(timePayments.delay);\r\n    animateFlow(timePayments);    \r\n}\r\n\r\nfunction updateAmount(){\r\n    \r\n    const html = `\r\n    <span class=\"toDatePaid\">${timePayments.toDate.toFixed(5)}</span>`;\r\n    paidToDate.innerHTML = html;\r\n}\r\n\r\n\r\n//Financial Calcs\r\nfunction animateFlow() {\r\n    inflow.innerHTML = coinHtml;\r\n    setTimeout(function() {\r\n        outflow.innerHTML = coinHtml;\r\n    }, timePayments.delay);\r\n\r\n    const inflowDuration = 10/timeIncome.second;\r\n    const outflowDuration = 10/-(timePayments.second);\r\n    \r\n    inflow.animate([\r\n        //keyframes\r\n        { transform: 'translateY(-15vh)'},\r\n        { transform: 'translateY(12vh)'}\r\n    ], {\r\n        //timing options\r\n        duration: inflowDuration,\r\n        iterations: Infinity,\r\n    });\r\n    \r\n    outflow.animate([\r\n        //keyframes\r\n        { transform: 'translateY(-12vh'},\r\n        { transform: 'translateY(15vh)'}\r\n    ], {\r\n        //timing options\r\n        delay: timePayments.delay,\r\n        duration: outflowDuration,\r\n        iterations: Infinity,\r\n    });\r\n    \r\n}\r\n\r\nfunction toggleView(e){\r\n    e.preventDefault();\r\n    if(chevron.classList.contains('fa-chevron-down'))\r\n    {\r\n        window.scrollTo({ left: 0, top: document.body.scrollHeight, behavior: \"smooth\" });\r\n        chevron.classList.remove('fa-chevron-down');\r\n        chevron.classList.add('fa-chevron-up');\r\n        return;\r\n    }\r\n        window.scrollTo({ left: 0, top: 0, behavior: \"smooth\" });\r\n        chevron.classList.remove('fa-chevron-up');\r\n        chevron.classList.add('fa-chevron-down');\r\n}\r\n\r\n//Event Listeners\r\nform.addEventListener('input', handleInput);\r\nsubmit.addEventListener('click', toggleView);\r\n\r\n//form.addEventListener('formUpdated', showResults);"]}